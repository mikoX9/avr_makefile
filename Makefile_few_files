all:	main.hex
	rm -f main.o
	rm -f main.elf
	rm -f modul.o

.c.o:
	avr-gcc -Wall -Os -DF_CPU=8000000 -c -mmcu=atmega32 modul/modul.c -o modul.o
	avr-gcc -Wall -Os -DF_CPU=8000000 -c -mmcu=atmega32 main.c -o main.o

main.elf: main.o modul.o
	avr-gcc -Wall -Os -DF_CPU=8000000 -mmcu=atmega16 main.o modul.o -o main.elf

main.hex: main.elf
	rm -f main.hex
	avr-objcopy -j .text -j .data -O ihex main.elf main.hex

clean:
	rm -f main.hex
	rm -f main.o
	rm -f main.elf
	rm -f modul.o